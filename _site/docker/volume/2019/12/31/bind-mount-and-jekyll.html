<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Today - Persisting data across container runs | ‘Scuse Me While I Think Out Loud</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Today - Persisting data across container runs" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Day before yesterday review Yesterday review" />
<meta property="og:description" content="Day before yesterday review Yesterday review" />
<link rel="canonical" href="http://0.0.0.0:4000/docker/volume/2019/12/31/bind-mount-and-jekyll.html" />
<meta property="og:url" content="http://0.0.0.0:4000/docker/volume/2019/12/31/bind-mount-and-jekyll.html" />
<meta property="og:site_name" content="‘Scuse Me While I Think Out Loud" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-12-31T09:49:17+00:00" />
<script type="application/ld+json">
{"url":"http://0.0.0.0:4000/docker/volume/2019/12/31/bind-mount-and-jekyll.html","headline":"Today - Persisting data across container runs","dateModified":"2019-12-31T09:49:17+00:00","datePublished":"2019-12-31T09:49:17+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://0.0.0.0:4000/docker/volume/2019/12/31/bind-mount-and-jekyll.html"},"description":"Day before yesterday review Yesterday review","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="'Scuse Me While I Think Out Loud" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">&#39;Scuse Me While I Think Out Loud</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Today - Persisting data across container runs</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-12-31T09:49:17+00:00" itemprop="datePublished">Dec 31, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="task-list" style="list-style-type: none">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Day before yesterday review</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />Yesterday review</li>
</ul>

<p>Notes from the <a href="https://www.udemy.com/course/docker-mastery">Docker Mastery</a> course section on Container lifetime.</p>

<p>Persisting data across container runs is done by either creating a named volume, or doing a bind mount.</p>

<h1 id="named-volumes">Named Volumes</h1>

<p>You can see what volumes are created with:</p>

<p><code class="highlighter-rouge">&gt;docker volume ls</code></p>

<p>If the Dockerfile you used to create the container has a “VOLUME /var/lib/mysql” type entry, a “Mounts” entry will be created for the container that has the mapping of the “Destination” (/var/lib/mysql) directory to the actual data “Source” directory on the local file system.  In this case it’s for mysql, and when the container runs it will use the volume name on the local file system mounted at the source directory.  Use <code class="highlighter-rouge">&gt;docker container inspect &lt;containerName&gt;</code> to see the “Mounts” details.</p>

<p>So the container thinks it’s writing to /var/lib/mysql, but in actual fact it’s writing the “Source” directory.</p>

<p>Its a good idea to actually name the volume when you create it because by itself, docker will create a guid type name i.e. it’s hard to pick out in a line up.  Here’s an example output where some of the volumes are named, and some are not:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>➜  gitweb git:(master) ✗ docker volume ls
DRIVER              VOLUME NAME
local               48db87015dfcb89d017564cf03a2ef1b9dc84166f2af8a6458587fb8ecd888bb
local               064396c959ff1311550c89b63481caf6f6373838edf0c65b131f351e7452bdc2
local               f7ac27660a1541243da14188ad19a4a9456b5ffe8e514e0aad7c81de29a65996
local               mysql-db
local               psql-data
</code></pre></div></div>

<p>To name the volume, use -v mysql-db:/var/lib/mysql when you do the docker run.</p>

<p>You can <code class="highlighter-rouge">&gt;docker volume inspect mysql-db</code> to get info on when the volume was created, what driver was used and what the Mountpoint is.</p>


  </div><a class="u-url" href="/docker/volume/2019/12/31/bind-mount-and-jekyll.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">&#39;Scuse Me While I Think Out Loud</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">&#39;Scuse Me While I Think Out Loud</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/purplehey"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">purplehey</span></a></li><li><a href="https://www.twitter.com/purplehey"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">purplehey</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
